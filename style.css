:root {
    --bg-color: #0f172a;
    --surface-color: #1e293b;
    --text-primary: #f8fafc;
    --text-secondary: #94a3b8;
    --accent-color: #38bdf8;
    --highlight-color: #f43f5e;
    /* Red-ish pink for the ORP letter */

    --font-family: 'Outfit', 'Inter', sans-serif;
    --reader-font-size: 4rem;
    --transition-speed: 0.2s;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-family);
    background-color: var(--bg-color);
    color: var(--text-primary);
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.app-header {
    padding: 1rem 2rem;
    text-align: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.app-header h1 {
    font-weight: 700;
    background: linear-gradient(135deg, var(--accent-color), #818cf8);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
    /* Fallback */
    letter-spacing: -0.05em;
}

#app {
    display: flex;
    flex-direction: column;
    height: 100%;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
}

/* Reader Area */
.reader-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.reading-area {
    position: relative;
    width: 100%;
    height: 300px;
    /* Fixed height for the reading zone */
    display: flex;
    justify-content: center;
    align-items: center;
    /* Visual Guides */
}

/* The Anchoring Guides */
.focus-indicator-top,
.focus-indicator-bottom {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 2px;
    height: 20px;
    background-color: rgba(255, 255, 255, 0.1);
}

.focus-indicator-top {
    top: 20px;
}

.focus-indicator-bottom {
    bottom: 20px;
}

/* The Anchoring Guides */
/* We keep the guides but the layout below changes */

.word-display {
    /* Grid Layout for Perfect Centering */
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: baseline;
    gap: 0;
    width: 100%;
    max-width: 900px;
    /* Constrain width locally */

    font-size: var(--reader-font-size);
    font-weight: 500;
    user-select: none;
    /* NO TRANSITIONS on the text display to prevent jumping/ghosting */
}

.word-display .part-left {
    text-align: right;
    color: var(--text-primary);
    white-space: pre;
    /* Preserve leading/trailing spaces if any */
}

.word-display .part-pivot {
    text-align: center;
    color: var(--highlight-color);
    font-weight: 700;
    display: inline-block;
    transform: translateY(-2px);
    /* visual tweak for alignment */
}

.word-display .part-right {
    text-align: left;
    color: var(--text-primary);
    white-space: pre;
}

/* Hide fallback/placeholder if needed or style it */
.word-display .placeholder {
    grid-column: 1 / -1;
    text-align: center;
    color: var(--text-secondary);
    font-size: 2rem;
}

/* Controls */
.select-control {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    min-width: 180px;
}

.select-control label {
    color: var(--text-secondary);
    font-size: 0.9rem;
    font-weight: 500;
}

select {
    background: var(--bg-color);
    color: var(--text-primary);
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 0.5rem;
    border-radius: 8px;
    font-family: inherit;
    cursor: pointer;
    outline: none;
}

select:focus {
    border-color: var(--accent-color);
}

/* FAB Play Button */
.fab-play-btn {
    position: absolute;
    bottom: 15rem;
    /* sits above the panel initially, adjusts with JS or CSS */
    left: 50%;
    transform: translateX(-50%);
    z-index: 50;
    /* Above panel */

    width: 90px;
    height: 90px;
    border-radius: 50%;
    border: none;

    background: linear-gradient(135deg, #0ea5e9, #6366f1);
    color: white;
    box-shadow: 0 10px 30px rgba(56, 189, 248, 0.4), 0 0 0 4px rgba(15, 23, 42, 0.5);
    /* ring effect */

    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;

    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.fab-play-btn:hover {
    transform: translateX(-50%) translateY(-6px) scale(1.05);
    box-shadow: 0 15px 40px rgba(56, 189, 248, 0.6), 0 0 0 4px rgba(15, 23, 42, 0.5);
    background: linear-gradient(135deg, #38bdf8, #818cf8);
}

.fab-play-btn:active {
    transform: translateX(-50%) translateY(-2px) scale(0.95);
}

/* Spacer in the control row so items don't crowd the FAB space */
.fab-spacer {
    width: 80px;
    flex-shrink: 0;
}

/* Controls Container & Handle */
.controls-container {
    position: relative;
    padding: 0 2rem 2rem 2rem;
    background-color: var(--surface-color);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    border-radius: 32px 32px 0 0;
    box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
    transition: transform 0.5s cubic-bezier(0.32, 0.72, 0, 1);
    z-index: 20;
}

.controls-container.collapsed {
    transform: translateY(calc(100% - 3rem));
    /* Show only handle (approx 3rem height) */
}

/* Handle Design */
.panel-handle-area {
    width: 100%;
    padding: 1rem 0 0.5rem 0;
    display: flex;
    justify-content: center;
    cursor: pointer;
}

.panel-handle-pill {
    width: 60px;
    height: 6px;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
    transition: background-color 0.2s;
}

.panel-handle-area:hover .panel-handle-pill {
    background-color: var(--accent-color);
}

/* When collapsed, we can move the FAB down slightly? 
   Or simpler: Fix FAB to sit nicely "in the groove" of the panel 
   and move with it? 
   No, user said 'visible' always. 
   Let's position FAB relative to viewport bottom but constrained. 
   
   Actually, absolute positioning relative to #app or body is safer.
*/
body {
    position: relative;
}

.fab-play-btn {
    position: fixed;
    bottom: 220px;
    /* Aligned with the open panel gap */
    transition: bottom 0.5s cubic-bezier(0.32, 0.72, 0, 1), transform 0.4s;
}

/* Adjust FAB position when panel is collapsed */
body.panel-is-collapsed .fab-play-btn {
    bottom: 60px;
    /* Sits nicely above the collapsed handle */
    transform: translateX(-50%) scale(0.8);
    /* Slightly smaller? optional */
}


.slider-control {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    min-width: 100px;
}

.slider-control label {
    color: var(--text-secondary);
    font-size: 0.9rem;
    font-weight: 500;
}

.slider-control span {
    color: var(--text-primary);
    font-weight: 700;
}

input[type="range"] {
    width: 100%;
    accent-color: var(--accent-color);
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    appearance: none;
}

input[type="range"]::-webkit-slider-thumb {
    appearance: none;
    width: 18px;
    height: 18px;
    background: var(--text-primary);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.input-area {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
}

#text-input {
    width: 100%;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 1rem;
    color: var(--text-primary);
    font-family: var(--font-family);
    height: 100px;
    resize: vertical;
    font-size: 1rem;
}

#text-input:focus {
    outline: none;
    border-color: var(--accent-color);
}